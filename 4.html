<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Successful</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="st.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <div class="form">
        <h1 class="r">Transaction Successful</h1>
        <div class="welcome">
            <h1 id="transaction-message" class="cur">Transaction Successful</h1>
        </div>

        <script>
            // Retrieve updated data from localStorage
            const username = localStorage.getItem('username');
            const email = localStorage.getItem('email');
            const bank = localStorage.getItem('bank');
            const account = localStorage.getItem('account');
            const currency = localStorage.getItem('currency');
            const amount = localStorage.getItem('amount');

            // Display transaction details if available
            const message = `${username ? username : 'Unknown user'} has deposited ${currency ? currency : 'unknown currency'} ${amount ? amount : 'unknown amount'} from ${bank ? bank : 'unknown bank'} using account ${account ? account : 'unknown account'}.`;
            document.getElementById('transaction-message').innerText = message;

            // Launch confetti animation regardless of missing data
            function launchConfetti() {
                const duration = 900; // Duration of the animation
                const end = Date.now() + duration;

                (function frame() {
                    // Left side
                    confetti({
                        particleCount: 5,
                        angle: 60, // Angle for the left side
                        spread: 55,
                        origin: { x: 0, y: Math.random() }, // From the left
                    });

                    // Right side
                    confetti({
                        particleCount: 5,
                        angle: 120, // Angle for the right side
                        spread: 55,
                        origin: { x: 1, y: Math.random() }, // From the right
                    });

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                })();
            }

            // Start the confetti animation
            launchConfetti();
        </script>
        <button class="bt" onclick="window.location.href='index.html';">Return To Home</button>
    </div>
</body>
</html>
