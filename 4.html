<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Successful</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="st.css">
</head>
<body>
    <div class="form">
        <h1 class="r">Transaction Successful</h1>
        <div class="welcome">
            <h1 id="transaction-message" class="cur">Transaction Successful</h1>
        </div>

        <script>
            const username = localStorage.getItem('username');
            const bank = localStorage.getItem('bank');
            const account = localStorage.getItem('account');
            const currency = localStorage.getItem('currency');
            const amount = localStorage.getItem('amount');

            if (!username || !bank || !account || !currency || !amount) {
                alert('Incomplete transaction data. Redirecting to home.');
                window.location.href = 'index.html';
            } else {
                const message = `${username} has deposited ${currency} ${amount} from ${bank} using account ${account}.`;
                document.getElementById('transaction-message').innerText = message;

                function launchConfetti() {
                    const duration = 900;
                    const end = Date.now() + duration;

                    (function frame() {
                        confetti({
                            particleCount: 5,
                            angle: 60,
                            spread: 55,
                            origin: { x: 0, y: Math.random() },
                        });
                        confetti({
                            particleCount: 5,
                            angle: 120,
                            spread: 55,
                            origin: { x: 1, y: Math.random() },
                        });
                        if (Date.now() < end) {
                            requestAnimationFrame(frame);
                        }
                    })();
                }

                launchConfetti();
            }
        </script>
        <button class="bt" onclick="window.location.href='index.html';">Return To Home</button>
    </div>
</body>
</html>
